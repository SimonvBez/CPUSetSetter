<Window x:Class="CPUSetSetter.UI.Tabs.Rules.CreateProgramRuleWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CPUSetSetter.UI.Tabs.Rules"
        xmlns:config="clr-namespace:CPUSetSetter.Config.Models"
        d:DataContext="{d:DesignInstance Type=local:CreateProgramRuleWindowViewModel}"
        mc:Ignorable="d"
        FocusManager.FocusedElement="{Binding ElementName=rulePathInput}"
        Title="Create a new Program Rule"
        WindowStartupLocation="CenterOwner"
        MinHeight="250"
        MaxHeight="250"
        Width="900"
        MinWidth="700">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="38"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0"
                   TextWrapping="Wrap">
            <Run Text="TIP: While Program Rules can be created like this, the easiest way to create new Program Rules"/>
            <Run Text="is by selecting a Core Mask for a process in the Processes tab."/>
            <Run Text="&#x0a;In the Masks tab you can even set up Hotkeys for your Core Masks. Just press your hotkey,"/>
            <Run Text="and that Core Mask will be applied to your current foreground program. Hotkeys also work in (most) fullscreen games."/>
        </TextBlock>

        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="24"/>
                <RowDefinition Height="3"/>
                <RowDefinition Height="24"/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="80"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0"
                       Text="Program Path:"
                       VerticalAlignment="Center"/>
            <TextBox x:Name="rulePathInput"
                     Grid.Row="0" Grid.Column="1" Margin="7,0,0,0"
                     Text="{Binding RulePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <Button Grid.Row="0" Grid.Column="2" Margin="7,0,0,0"
                    Content="Browse..."
                    Command="{Binding OpenBrowseDialogCommand}"/>

            <TextBlock Grid.Row="2" Grid.Column="0"
                       Text="Core Mask:"
                       VerticalAlignment="Center"/>
            <ComboBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2" Margin="7,0,0,0"
                      ItemsSource="{Binding LogicalProcessorMasks, Source={x:Static config:AppConfig.Instance}}"
                      SelectedValue="{Binding SelectedMask, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Name}"/>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
        </Grid>

        <Button Grid.Row="3" Margin="0,10,0,0"
                Content="Create"
                IsEnabled="{Binding CanCreate}"
                Command="{Binding CreateProgramRuleCommand}"/>

    </Grid>
</Window>
